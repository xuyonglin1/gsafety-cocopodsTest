(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6546cfb6"],{"04f8":function(t,e,n){},1274:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"back-title"},[t.iosFlag?t._e():n("div",{staticClass:"bg"}),n("van-nav-bar",{attrs:{"left-text":t.title,"left-arrow":""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"right",fn:function(){return[t._t("search")]},proxy:!0}],null,!0)})],1)},a=[],i=(n("6b54"),n("2397"),n("d4ec")),c=n("bee2"),o=n("262e"),s=n("99de"),u=n("7e84"),l=n("9ab4"),f=n("60a3"),p=n("4bb5"),d=n("dfaf");function v(t){var e=b();return function(){var n,r=Object(u["a"])(t);if(e){var a=Object(u["a"])(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s["a"])(this,n)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}f["a"].registerHooks(["beforeRouteEnter"]);var h=function(t){Object(o["a"])(n,t);var e=v(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.iosFlag=!1,t.isPageHide=!1,t}return Object(c["a"])(n,[{key:"created",value:function(){this.iosFlag=Object(d["a"])()}},{key:"beforeRouteEnter",value:function(t,e,n){console.log(e.path,t)}},{key:"onClickLeft",value:function(){var t=this.routes,e=t[t.length-2];t.pop(),e&&this.$router.push(e),this.set_history(t)}},{key:"reload",value:function(){this.isPageHide&&window.location.reload()}},{key:"unReload",value:function(){this.isPageHide=!0}}]),n}(f["c"]);Object(l["__decorate"])([Object(f["b"])()],h.prototype,"title",void 0),Object(l["__decorate"])([Object(p["a"])("history")],h.prototype,"routes",void 0),Object(l["__decorate"])([Object(p["b"])("SET_HISTORY")],h.prototype,"set_history",void 0),h=Object(l["__decorate"])([f["a"]],h);var g=h,j=g,y=(n("ff74"),n("2877")),O=Object(y["a"])(j,r,a,!1,null,"23555296",null);e["a"]=O.exports},"565b":function(t,e,n){"use strict";var r=n("60ee"),a=n.n(r);a.a},"60ee":function(t,e,n){},6837:function(t,e,n){t.exports=n.p+"img/avatar.155fe75c.png"},c1c5:function(t,e,n){"use strict";n.d(e,"o",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"m",(function(){return d})),n.d(e,"k",(function(){return v})),n.d(e,"l",(function(){return b})),n.d(e,"j",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"n",(function(){return j})),n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return _})),n.d(e,"e",(function(){return m}));var r=n("f39e"),a=n("997a"),i={getTrainScore:"/app/train/volunteer/getScore",addTrainFeedback:"/app/train/feedback/add",getTrainList:"/app/train/volunteer/list/all",getAllTrainList:"/app/train/page/listByUserId?",getJoinedListBypage:"/app/train/page/trainJoinedList?",getJoinedList:"/app/train/trainJoinedList",getTrainFeedBack:"/app/train/feedback/list",addTrainScore:"/app/train/volunteer/score",getTrain:"/app/train/get/",applyTrain:"/app/train/volunteer/apply",rejectTrain:"/app/train/volunteer/reject",confirmTrain:"/app/train/volunteer/confirm",applyExitTrain:"/app/train/volunteer/exit/apply",canceljoinTrain:"/app/train/volunteer/apply/cancel",exitList:"/app/train/volunteer/exit/list"},c=i,o=a["a"].baseUrl;function s(t){var e=o+"/app/train/volunteer/sign";return Object(r["b"])(e,t)}function u(t,e,n){var a=o+c.getAllTrainList+"rows="+n+"&page="+e;return Object(r["b"])(a,t)}function l(t,e,n){var a=o+c.getJoinedListBypage+"rows="+n+"&page="+e;return Object(r["b"])(a,t)}function f(t){var e=o+c.getJoinedList;return Object(r["b"])(e,t)}function p(t){var e=o+"/app/train/volunteer/finish";return Object(r["b"])(e,t)}function d(t){var e=o+c.getTrainList;return Object(r["b"])(e,t)}function v(t){var e=o+c.getTrainFeedBack;return Object(r["b"])(e,t)}function b(t){var e=o+c.getTrainScore;return Object(r["b"])(e,t)}function h(t){var e=o+c.getTrain+t;return Object(r["a"])(e)}function g(t){var e=o+c.applyTrain;return Object(r["b"])(e,t)}function j(t){var e=o+c.rejectTrain;return Object(r["b"])(e,t)}function y(t){var e=o+c.confirmTrain;return Object(r["b"])(e,t)}function O(t,e){var n=o+c.applyExitTrain;return Object(r["b"])(n,{bizId:t,volunteerId:e})}function _(t){var e=o+c.canceljoinTrain;return Object(r["b"])(e,t)}function m(t){var e=o+c.exitList;return Object(r["b"])(e,{trainId:t})}},c24c:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rating"},[n("back-title",{attrs:{title:t.title}}),n("div",{staticClass:"rating-container"},[n("div",{staticClass:"info-wrapper"},[t._m(0),n("div",{staticClass:"name-wrapper"},[n("div",{staticClass:"name"},[t._v(t._s(t.$t("mine.name"))+"："+t._s(t.volunteerInfo.name))]),t.volunteerInfo.taskAttendFlag?n("div",{staticClass:"status"},[t._v(t._s(t.$t("drill.signed")))]):t._e(),t.volunteerInfo.taskAttendFlag?t._e():n("div",{staticClass:"status"},[t._v(t._s(t.$t("drill.noSign")))])])]),n("div",{staticClass:"score-wrapper"},[n("span",{staticClass:"rate-score"},[t._v(t._s(t.$t("drill.rateScore")))]),t.read?n("van-rate",{attrs:{readonly:"","allow-half":""},on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e(),t.read?t._e():n("van-rate",{attrs:{"allow-half":""},on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("div",{staticClass:"content-wrapper"},[t.read?t._e():n("van-field",{staticClass:"content",attrs:{type:"textarea",maxlength:"36",placeholder:t.$t("drill.pleaseRateContent"),rows:"4","show-word-limit":""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t.read?n("van-field",{staticClass:"content",attrs:{type:"textarea",placeholder:t.$t("drill.noReat"),readonly:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):t._e()],1),n("div",{staticClass:"submit-wrapper"},[t.read?t._e():n("div",{staticClass:"submit",on:{click:t.submit}},[t._v(t._s(t.$t("drill.submit")))])])])],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"avatar-wrapper"},[r("img",{staticClass:"icon",attrs:{alt:"頭像圖標",src:n("6837")}})])}],i=(n("2397"),n("6b54"),n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),s=n("262e"),u=n("99de"),l=n("7e84"),f=n("9ab4"),p=n("60a3"),d=n("4bb5"),v=n("2241"),b=n("1274"),h=n("cc14"),g=n("c1c5"),j=function t(){Object(c["a"])(this,t)},y=n("e7df");function O(t){var e=_();return function(){var n,r=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u["a"])(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){Object(s["a"])(n,t);var e=O(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.value=0,t.title="评价",t.content="",t.score=new j,t}return Object(o["a"])(n,[{key:"created",value:function(){this.volunteerInfo=this.$route.query.data,this.score.volunteerId=this.volunteerInfo.id;var t=this.$route.query.from;"train"===t&&(this.score.trainId=this.trainDetail.id,this.getTrainRating()),"exercise"===t&&(this.score.exerciseId=this.exercise.id,this.getExerciseRating())}},{key:"getTrainRating",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["l"])(this.score);case 2:e=t.sent,n=e.success,r=e.data,this._getRating(n,r);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getExerciseRating",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["u"])(this.score);case 2:e=t.sent,n=e.success,r=e.data,this._getRating(n,r);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getRating",value:function(t,e){if(t&&e){this.content=e.evaluate?e.evaluate:this.content;var n=parseFloat(e.score);this.value=n||this.value}}},{key:"onChange",value:function(t){console.log(t)}},{key:"submit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.score.volunteerId=this.volunteerInfo.id,this.score.score=this.value+"",this.score.evaluate=this.content,this.score.exerciseId=this.exercise.id,console.log(this.content),0===parseInt(this.score.score,10)||""===this.content.trim()){t.next=12;break}return t.next=8,Object(h["e"])(this.score);case 8:e=t.sent,e.success&&v["a"].alert({message:this.$t("drill.submitSuccess").toString()}),t.next=13;break;case 12:Object(y["a"])("請輸入評分和評價內容");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"read",get:function(){return"read"===this.$route.query.read}}]),n}(p["c"]);Object(f["__decorate"])([Object(d["a"])("exercise")],m.prototype,"exercise",void 0),Object(f["__decorate"])([Object(d["a"])("trainDetail")],m.prototype,"trainDetail",void 0),m=Object(f["__decorate"])([Object(p["a"])({components:{BackTitle:b["a"]}})],m);var k=m,x=k,w=(n("565b"),n("2877")),R=Object(w["a"])(x,r,a,!1,null,"3b52e191",null);e["default"]=R.exports},ff74:function(t,e,n){"use strict";var r=n("04f8"),a=n.n(r);a.a}}]);